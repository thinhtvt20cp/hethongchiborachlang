<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Há»‡ thá»‘ng ná»™i bá»™</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Poppins',sans-serif}
body{
margin:0;
height:100vh;
background:linear-gradient(135deg,#f7971e,#ffd200);
display:flex;
align-items:center;
justify-content:center;
}

/* Card */
.card{
width:360px;
background:rgba(255,255,255,.9);
backdrop-filter:blur(12px);
border-radius:16px;
box-shadow:0 20px 40px rgba(0,0,0,.25);
padding:30px;
animation:fadeUp .5s ease;
}

@keyframes fadeUp{
from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}
}

.hidden{display:none}

h2{
text-align:center;
color:#e67e22;
margin-bottom:20px;
}

.input-group{
margin-bottom:14px;
}

.input-group input,
.input-group select{
width:100%;
padding:12px 14px;
border-radius:10px;
border:2px solid #ddd;
outline:none;
transition:.3s;
}

.input-group input:focus,
.input-group select:focus{
border-color:#f39c12;
box-shadow:0 0 0 4px rgba(243,156,18,.25);
}

button{
width:100%;
padding:12px;
border:none;
border-radius:10px;
background:linear-gradient(135deg,#f39c12,#e67e22);
color:#fff;
font-size:15px;
cursor:pointer;
transition:.3s;
}

button:hover{
transform:translateY(-2px);
box-shadow:0 8px 20px rgba(0,0,0,.2);
}

.switch{
margin-top:14px;
text-align:center;
color:#555;
cursor:pointer;
transition:.3s;
}

.switch:hover{color:#e67e22}
</style>
</head>

<body>

<!-- ===== LOGIN ===== -->
<div class="card" id="loginBox">
<h2>ğŸ” ÄÄƒng nháº­p</h2>

<div class="input-group">
<input id="lgUser" placeholder="TÃªn Ä‘Äƒng nháº­p">
</div>

<div class="input-group">
<input id="lgPass" type="password" placeholder="Máº­t kháº©u">
</div>

<button onclick="login()">ÄÄƒng nháº­p</button>

<div class="switch" onclick="showBox('registerBox')">Táº¡o tÃ i khoáº£n</div>
<div class="switch" onclick="showBox('forgotBox')">QuÃªn máº­t kháº©u</div>
</div>

<!-- ===== REGISTER ===== -->
<div class="card hidden" id="registerBox">
<h2>ÄÄƒng kÃ½</h2>

<div class="input-group"><input id="rgUser" placeholder="TÃªn Ä‘Äƒng nháº­p"></div>
<div class="input-group"><input id="rgPass" type="password" placeholder="Máº­t kháº©u"></div>

<div class="input-group">
<select id="rgQ">
<option value="">-- CÃ¢u há»i báº£o máº­t --</option>
<option value="pet">TÃªn thÃº cÆ°ng?</option>
<option value="school">TrÆ°á»ng tiá»ƒu há»c?</option>
<option value="city">QuÃª quÃ¡n?</option>
</select>
</div>

<div class="input-group"><input id="rgA" placeholder="CÃ¢u tráº£ lá»i"></div>

<button onclick="register()">ÄÄƒng kÃ½</button>
<div class="switch" onclick="showBox('loginBox')">â¬… Quay láº¡i Ä‘Äƒng nháº­p</div>
</div>

<!-- ===== FORGOT ===== -->
<div class="card hidden" id="forgotBox">
<h2>QuÃªn máº­t kháº©u</h2>

<div class="input-group"><input id="fgUser" placeholder="TÃªn Ä‘Äƒng nháº­p"></div>

<div class="input-group">
<select id="fgQ">
<option value="pet">TÃªn thÃº cÆ°ng?</option>
<option value="school">TrÆ°á»ng tiá»ƒu há»c?</option>
<option value="city">QuÃª quÃ¡n?</option>
</select>
</div>

<div class="input-group"><input id="fgA" placeholder="CÃ¢u tráº£ lá»i"></div>
<div class="input-group"><input id="fgNewPass" type="password" placeholder="Máº­t kháº©u má»›i"></div>

<button onclick="resetPass()">Äáº·t láº¡i máº­t kháº©u</button>
<div class="switch" onclick="showBox('loginBox')">â¬… Quay láº¡i Ä‘Äƒng nháº­p</div>
</div>

<script>
/* ===== DATA ===== */
let users = JSON.parse(localStorage.getItem("users")||"[]");

/* ===== UI CONTROL ===== */
function showBox(boxId){
    document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));
    const box=document.getElementById(boxId);
    box.classList.remove("hidden");

    box.style.animation="none";
    box.offsetHeight;
    box.style.animation="fadeUp .5s ease";
}

/* ===== REGISTER ===== */
function register(){
    if(!rgUser.value||!rgPass.value||!rgQ.value||!rgA.value)
        return alert("Nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin");

    if(users.find(u=>u.username===rgUser.value))
        return alert("TÃ i khoáº£n Ä‘Ã£ tá»“n táº¡i");

    users.push({
        username: rgUser.value,
        password: rgPass.value,
        role: "user",
        question: rgQ.value,
        answer: rgA.value,
        createdAt: new Date().toISOString()
    });

    localStorage.setItem("users",JSON.stringify(users));
    alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng");
    showBox("loginBox");
}

/* ===== LOGIN ===== */
function login(){
    let u=users.find(u=>u.username===lgUser.value && u.password===lgPass.value);
    if(!u) return alert("Sai tÃ i khoáº£n hoáº·c máº­t kháº©u");

    localStorage.setItem("loginUser",u.username);
    localStorage.setItem("role",u.role);

    if(u.role==="admin")
        location.href="index.html";
    else
        location.href="index.html";
}

/* ===== RESET PASSWORD ===== */
function resetPass(){
    let u=users.find(u=>
        u.username===fgUser.value &&
        u.question===fgQ.value &&
        u.answer===fgA.value
    );

    if(!u) return alert("ThÃ´ng tin khÃ´ng Ä‘Ãºng");

    u.password=fgNewPass.value;
    localStorage.setItem("users",JSON.stringify(users));
    alert("ÄÃ£ Ä‘áº·t láº¡i máº­t kháº©u");
    showBox("loginBox");
}
</script>

</body>
</html>
